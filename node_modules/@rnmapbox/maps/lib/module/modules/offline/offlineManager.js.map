{"version":3,"names":["NativeModules","NativeEventEmitter","isUndefined","isFunction","isAndroid","default","OfflineCreatePackOptions","OfflinePack","MGLModule","MapboxOfflineManager","MGLOfflineModule","OfflineModuleEventEmitter","OfflineManager","constructor","_hasInitialized","_offlinePacks","_progressListeners","_errorListeners","_onProgress","bind","_onError","subscriptionProgress","subscriptionError","createPack","options","progressListener","errorListener","_initialize","packOptions","name","Error","subscribe","nativeOfflinePack","invalidatePack","offlinePack","deletePack","invalidateAmbientCache","MapboxV10","console","warn","clearAmbientCache","migrateOfflineCache","setMaximumAmbientCacheSize","size","resetDatabase","getPacks","Object","keys","map","getPack","mergeOfflineRegions","path","setTileCountLimit","limit","setProgressEventThrottle","throttleValue","packName","totalProgressListeners","length","addListener","OfflineCallbackName","Progress","totalErrorListeners","setPackObserver","e","log","unsubscribe","remove","nativeOfflinePacks","state","payload","_hasListeners","pack","OfflinePackDownloadState","Complete","listenerMap","offlineManager"],"sourceRoot":"../../../../src","sources":["modules/offline/offlineManager.ts"],"mappings":"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"}